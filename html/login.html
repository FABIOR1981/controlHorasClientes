<!-- login.html - Formulario de login para controlHorasClientes -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Control Horas Clientes</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/login.css">
</head>
<body>
    <div class="login-box">
        <img src="../imagenes/logo_shalon.png" alt="Logo Shalon Morales" style="display:block; margin:0 auto 24px auto; max-width:180px;">
        <h2>Iniciar Sesión</h2>
        <form id="loginForm">
                    <input type="text" id="documento" placeholder="Documento" required autofocus>
            <input type="password" id="contrasena" placeholder="Contraseña" required>
            <div class="error" id="loginError" style="display:none;"></div>
            <button type="submit">Ingresar</button>
        </form>
    </div>
    <script src="../js/login.js"></script>
    <script>
    document.getElementById('loginForm').onsubmit = async function(e) {
        e.preventDefault();
                const documento = document.getElementById('documento').value;
                const pass = document.getElementById('contrasena').value;
                const usuario = await validarLogin(documento, pass);
        if(usuario) {
            // Guardar usuario en localStorage para mantener sesión
                    localStorage.setItem('usuarioLogueado', JSON.stringify({
                        documento: usuario.documento,
                        nombre: usuario.nombre,
                        rol: usuario.rol
            }));
            window.location.href = 'dashboard.html';
        } else {
            document.getElementById('loginError').textContent = 'Usuario o contraseña incorrectos';
            document.getElementById('loginError').style.display = 'block';
        }
    }
    </script>
</body>
<footer style="text-align:center; color:#888; font-size:13px; margin-top:32px;">Realizado por TechFaRo © 2026</footer>
</html>
